# üìä –ê–Ω–∞–ª–∏–∑: –°—Ç–æ–∏—Ç –ª–∏ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –Ω–∞ Redis Pub/Sub?

## üîç –¢–µ–∫—É—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã Redis:

1. **Redis List (BRPOP/LPUSH)** - –û—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á
   - `tasks:download_queue` - –æ—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á –Ω–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ
   - `events:analytics_queue` - –æ—á–µ—Ä–µ–¥—å —Å–æ–±—ã—Ç–∏–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
   - **–ü–∞—Ç—Ç–µ—Ä–Ω**: Producer-Consumer —Å –±–ª–æ–∫–∏—Ä—É—é—â–∏–º –æ–∂–∏–¥–∞–Ω–∏–µ–º

2. **Redis Pub/Sub** - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å–æ–±—ã—Ç–∏—è—Ö
   - `video_download_event:{hash}` - –∫–∞–Ω–∞–ª—ã –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
   - **–ü–∞—Ç—Ç–µ—Ä–Ω**: Event-driven —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
   - –£–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ `wait_for_download()`

3. **Redis String/Hash** - –ö—ç—à –∏ –¥–∞–Ω–Ω—ã–µ
   - `video:{hash}` - –∫—ç—à –≤–∏–¥–µ–æ
   - `user:{id}:processing_status` - —Å—Ç–∞—Ç—É—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - `lock:video:{hash}` - locks –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –¥—É–±–ª–∏–∫–∞—Ç–æ–≤

4. **Redis SET NX** - Distributed locks
   - `lock:video:{hash}` - –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –Ω–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ

---

## ‚úÖ –ß—Ç–æ —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Pub/Sub

### –¢–µ–∫—É—â–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
- ‚úÖ **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è** (`wait_for_download`)
  - Worker –ø—É–±–ª–∏–∫—É–µ—Ç —Å–æ–±—ã—Ç–∏–µ —á–µ—Ä–µ–∑ `publish_video_download_event()`
  - `wait_for_download()` –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –∫–∞–Ω–∞–ª –∏ —Å–ª—É—à–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è
  - –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥: Pub/Sub + polling –∫—ç—à–∞

---

## ü§î –ß—Ç–æ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –Ω–∞ Pub/Sub

### 1. –û—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á –Ω–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ (`tasks:download_queue`)

**–¢–µ–∫—É—â–∏–π –ø–æ–¥—Ö–æ–¥ (Redis List):**
```python
# Producer
await redis.lpush("tasks:download_queue", task_json)

# Consumer
task = await redis.brpop("tasks:download_queue", timeout=5)
```

**Pub/Sub –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞:**
```python
# Producer
await redis.publish("tasks:download", task_json)

# Consumer
pubsub = redis.pubsub()
await pubsub.subscribe("tasks:download")
message = await pubsub.get_message()
```

### 2. –û—á–µ—Ä–µ–¥—å –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ (`events:analytics_queue`)

**–¢–µ–∫—É—â–∏–π –ø–æ–¥—Ö–æ–¥ (Redis List):**
```python
# Producer
await redis.lpush("events:analytics_queue", event_json)

# Consumer
event = await redis.brpop("events:analytics_queue", timeout=5)
```

**Pub/Sub –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞:**
```python
# Producer
await redis.publish("analytics:events", event_json)

# Consumer
pubsub = redis.pubsub()
await pubsub.subscribe("analytics:events")
```

### 3. –°—Ç–∞—Ç—É—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–¢–µ–∫—É—â–∏–π –ø–æ–¥—Ö–æ–¥ (Redis String —Å polling):**
```python
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
await redis.set(f"user:{user_id}:processing_status", status_json)

# –ü—Ä–æ–≤–µ—Ä–∫–∞ (polling)
status = await redis.get(f"user:{user_id}:processing_status")
```

**Pub/Sub –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞:**
```python
# –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞
await redis.publish(f"user:{user_id}:status", status_json)
```

---

## ‚öñÔ∏è –°—Ä–∞–≤–Ω–µ–Ω–∏–µ: Redis List vs Pub/Sub

### Redis List (BRPOP/LPUSH) - –¢–µ–∫—É—â–∏–π –ø–æ–¥—Ö–æ–¥

**‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
1. **–ì–∞—Ä–∞–Ω—Ç–∏—è –¥–æ—Å—Ç–∞–≤–∫–∏** - –∑–∞–¥–∞—á–∏ –Ω–µ —Ç–µ—Ä—è—é—Ç—Å—è, –æ—Å—Ç–∞—é—Ç—Å—è –≤ –æ—á–µ—Ä–µ–¥–∏
2. **–ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å** - –∑–∞–¥–∞—á–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ Redis
3. **FIFO –≥–∞—Ä–∞–Ω—Ç–∏—è** - –ø–æ—Ä—è–¥–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–¥–∞—á
4. **–û–¥–∏–Ω –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å** - –∫–∞–∂–¥–∞—è –∑–∞–¥–∞—á–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∏–º worker'–æ–º
5. **–ü—Ä–æ—Å—Ç–æ—Ç–∞** - –ª–µ–≥–∫–æ –ø–æ–Ω—è—Ç—å –∏ –æ—Ç–ª–∞–¥–∏—Ç—å
6. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ worker'–æ–≤ (load balancing)

**‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
1. **Polling overhead** - worker –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –æ–ø—Ä–∞—à–∏–≤–∞–µ—Ç –æ—á–µ—Ä–µ–¥—å (—Ö–æ—Ç—è BRPOP –±–ª–æ–∫–∏—Ä—É—é—â–∏–π)
2. **–ù–µ—Ç broadcast** - –Ω–µ–ª—å–∑—è –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É –≤—Å–µ–º worker'–∞–º –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
3. **–ù–µ—Ç –ø–æ–¥–ø–∏—Å–æ–∫** - –Ω–µ–ª—å–∑—è –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–∏–ø–æ–≤ —Å–æ–±—ã—Ç–∏–π

### Redis Pub/Sub

**‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
1. **Real-time** - –º–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
2. **Broadcast** - –æ–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤
3. **–ì–∏–±–∫–æ—Å—Ç—å** - –º–æ–∂–Ω–æ –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –∫–∞–Ω–∞–ª–æ–≤ (`PSUBSCRIBE`)
4. **Event-driven** - –±–æ–ª–µ–µ —Ä–µ–∞–∫—Ç–∏–≤–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
5. **–ú–µ–Ω—å—à–µ overhead** - –Ω–µ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ polling'–∞

**‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
1. **–ù–µ—Ç –≥–∞—Ä–∞–Ω—Ç–∏–∏ –¥–æ—Å—Ç–∞–≤–∫–∏** - –µ—Å–ª–∏ –ø–æ–¥–ø–∏—Å—á–∏–∫ offline, —Å–æ–æ–±—â–µ–Ω–∏–µ —Ç–µ—Ä—è–µ—Ç—Å—è
2. **–ù–µ—Ç –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏** - —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ Redis
3. **–ù–µ—Ç FIFO –≥–∞—Ä–∞–Ω—Ç–∏–∏** - –ø–æ—Ä—è–¥–æ–∫ –º–æ–∂–µ—Ç –Ω–∞—Ä—É—à–∏—Ç—å—Å—è
4. **–í—Å–µ –ø–æ–ª—É—á–∞—é—Ç** - –≤—Å–µ –ø–æ–¥–ø–∏—Å—á–∏–∫–∏ –ø–æ–ª—É—á–∞—é—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ (–Ω—É–∂–Ω–∞ –ª–æ–≥–∏–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏)
5. **–°–ª–æ–∂–Ω–æ—Å—Ç—å** - –Ω—É–∂–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –ø–æ–¥–ø–∏—Å–∫–∞–º–∏, –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è–º–∏
6. **–ù–µ—Ç –æ—á–µ—Ä–µ–¥–∏** - –µ—Å–ª–∏ worker —É–ø–∞–ª, –∑–∞–¥–∞—á–∞ —Ç–µ—Ä—è–µ—Ç—Å—è

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º

### 1. –û—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á –Ω–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ (`tasks:download_queue`)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: ‚ùå –ù–ï –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –Ω–∞ Pub/Sub**

**–ü—Ä–∏—á–∏–Ω—ã:**
- ‚úÖ **–ö—Ä–∏—Ç–∏—á–Ω–∞ –≥–∞—Ä–∞–Ω—Ç–∏—è –¥–æ—Å—Ç–∞–≤–∫–∏** - –ø–æ—Ç–µ—Ä—è –∑–∞–¥–∞—á–∏ = –ø–æ—Ç–µ—Ä—è –∑–∞–ø—Ä–æ—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ **–ù—É–∂–Ω–∞ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å** - –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ Redis –∑–∞–¥–∞—á–∏ –¥–æ–ª–∂–Ω—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å—Å—è
- ‚úÖ **FIFO –≤–∞–∂–µ–Ω** - –ø–æ—Ä—è–¥–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –º–æ–∂–µ—Ç –≤–ª–∏—è—Ç—å –Ω–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã
- ‚úÖ **–û–¥–∏–Ω –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å** - –∫–∞–∂–¥–∞—è –∑–∞–¥–∞—á–∞ –¥–æ–ª–∂–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑
- ‚úÖ **–¢–µ–∫—É—â–∏–π –ø–æ–¥—Ö–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ** - BRPOP —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–µ–Ω –∏ –Ω–∞–¥–µ–∂–µ–Ω

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ (–µ—Å–ª–∏ –Ω—É–∂–µ–Ω real-time):**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **Redis Streams** (–ª—É—á—à–µ —á–µ–º Pub/Sub –¥–ª—è –æ—á–µ—Ä–µ–¥–µ–π)
- –ò–ª–∏ –≥–∏–±—Ä–∏–¥: List –¥–ª—è –æ—á–µ—Ä–µ–¥–∏ + Pub/Sub –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### 2. –û—á–µ—Ä–µ–¥—å –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ (`events:analytics_queue`)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: ‚ö†Ô∏è –ú–æ–∂–Ω–æ, –Ω–æ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ**

**–ê–Ω–∞–ª–∏–∑:**
- ‚úÖ –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–∞ - –ø–æ—Ç–µ—Ä—è —Å–æ–±—ã—Ç–∏—è –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–∞
- ‚úÖ –ú–æ–∂–Ω–æ –¥–æ–ø—É—Å—Ç–∏—Ç—å –ø–æ—Ç–µ—Ä—é —Å–æ–±—ã—Ç–∏–π –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ
- ‚ùå –ù–æ –Ω—É–∂–Ω–∞ –≥–∞—Ä–∞–Ω—Ç–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ - —Å–æ–±—ã—Ç–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã
- ‚ùå –ù—É–∂–Ω–∞ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å - –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ worker'–∞ —Å–æ–±—ã—Ç–∏—è –Ω–µ –¥–æ–ª–∂–Ω—ã —Ç–µ—Ä—è—Ç—å—Å—è

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –û—Å—Ç–∞–≤–∏—Ç—å Redis List, –Ω–æ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å Pub/Sub –¥–ª—è real-time —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### 3. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: ‚úÖ –£–ñ–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Pub/Sub - –æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å**

**–¢–µ–∫—É—â–∏–π –ø–æ–¥—Ö–æ–¥ –æ–ø—Ç–∏–º–∞–ª–µ–Ω:**
- Pub/Sub –¥–ª—è –º–≥–Ω–æ–≤–µ–Ω–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- Polling –∫—ç—à–∞ –∫–∞–∫ fallback (–Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å)
- –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥ = –ª—É—á—à–µ–µ –∏–∑ –æ–±–æ–∏—Ö –º–∏—Ä–æ–≤

### 4. –°—Ç–∞—Ç—É—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: ‚ö†Ô∏è –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å Pub/Sub –∫–∞–∫ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ**

**–ê–Ω–∞–ª–∏–∑:**
- –¢–µ–∫—É—â–∏–π –ø–æ–¥—Ö–æ–¥ (Redis String + polling) —Ä–∞–±–æ—Ç–∞–µ—Ç
- Pub/Sub –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è **real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π —Å—Ç–∞—Ç—É—Å–∞**
- –ù–æ –æ—Å–Ω–æ–≤–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –æ—Å—Ç–∞—Ç—å—Å—è –≤ String (–ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å)

**–ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥:**
```python
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ (–∫–∞–∫ —Å–µ–π—á–∞—Å)
await redis.set(f"user:{user_id}:status", status_json)

# + Pub/Sub —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –¥–ª—è real-time
await redis.publish(f"user:{user_id}:status", status_json)
```

---

## üöÄ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: Redis Streams

–ï—Å–ª–∏ –Ω—É–∂–µ–Ω real-time + –≥–∞—Ä–∞–Ω—Ç–∏—è –¥–æ—Å—Ç–∞–≤–∫–∏, —Ä–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ **Redis Streams**:

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Streams:**
- ‚úÖ –ì–∞—Ä–∞–Ω—Ç–∏—è –¥–æ—Å—Ç–∞–≤–∫–∏ (–∫–∞–∫ List)
- ‚úÖ Real-time (–∫–∞–∫ Pub/Sub)
- ‚úÖ Consumer groups (–∫–∞–∫ Kafka)
- ‚úÖ –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å
- ‚úÖ FIFO –≥–∞—Ä–∞–Ω—Ç–∏—è

**–ü—Ä–∏–º–µ—Ä:**
```python
# Producer
await redis.xadd("tasks:download", {"task": task_json})

# Consumer (Consumer Group)
messages = await redis.xreadgroup(
    "workers", "worker-1", 
    {"tasks:download": ">"}, 
    count=1, block=5000
)
```

---

## üìä –ò—Ç–æ–≥–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢–µ–∫—É—â–∏–π –ø–æ–¥—Ö–æ–¥ | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è | –ü—Ä–∏—á–∏–Ω–∞ |
|-----------|---------------|--------------|---------|
| **–û—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á** | Redis List | ‚úÖ **–û—Å—Ç–∞–≤–∏—Ç—å** | –ö—Ä–∏—Ç–∏—á–Ω–∞ –≥–∞—Ä–∞–Ω—Ç–∏—è –¥–æ—Å—Ç–∞–≤–∫–∏ |
| **–û—á–µ—Ä–µ–¥—å –∞–Ω–∞–ª–∏—Ç–∏–∫–∏** | Redis List | ‚úÖ **–û—Å—Ç–∞–≤–∏—Ç—å** | –ù—É–∂–Ω–∞ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å |
| **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å–∫–∞—á–∏–≤–∞–Ω–∏–∏** | Pub/Sub + Polling | ‚úÖ **–û—Å—Ç–∞–≤–∏—Ç—å** | –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –≥–∏–±—Ä–∏–¥ |
| **–°—Ç–∞—Ç—É—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** | Redis String | ‚ö†Ô∏è **–î–æ–±–∞–≤–∏—Ç—å Pub/Sub** | Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è |

---

## üéØ –§–∏–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### ‚úÖ –ß—Ç–æ –æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å:
1. **–û—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á** - Redis List (BRPOP/LPUSH)
2. **–û—á–µ—Ä–µ–¥—å –∞–Ω–∞–ª–∏—Ç–∏–∫–∏** - Redis List
3. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å–∫–∞—á–∏–≤–∞–Ω–∏–∏** - Pub/Sub + Polling (–≥–∏–±—Ä–∏–¥)

### ‚ö†Ô∏è –ß—Ç–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å:
1. **–°—Ç–∞—Ç—É—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** - –¥–æ–±–∞–≤–∏—Ç—å Pub/Sub –¥–ª—è real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Pub/Sub –¥–ª—è —Å–æ–±—ã—Ç–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ)

### üöÄ –ï—Å–ª–∏ –Ω—É–∂–µ–Ω real-time + –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å:
- –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å **Redis Streams** –¥–ª—è –æ—á–µ—Ä–µ–¥–µ–π (–Ω–æ —ç—Ç–æ –±–æ–ª—å—à–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π)

---

## üí° –í—ã–≤–æ–¥

**–ù–ï —Å—Ç–æ–∏—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –Ω–∞ Pub/Sub**, –ø–æ—Ç–æ–º—É —á—Ç–æ:

1. ‚ùå **–ü–æ—Ç–µ—Ä—è –≥–∞—Ä–∞–Ω—Ç–∏–∏ –¥–æ—Å—Ç–∞–≤–∫–∏** - –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –∑–∞–¥–∞—á —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
2. ‚ùå **–ü–æ—Ç–µ—Ä—è –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏** - –∑–∞–¥–∞—á–∏ —Ç–µ—Ä—è—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ
3. ‚ùå **–°–ª–æ–∂–Ω–æ—Å—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏** - –Ω—É–∂–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –ø–æ–¥–ø–∏—Å–∫–∞–º–∏, –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è–º–∏
4. ‚ùå **–¢–µ–∫—É—â–∏–π –ø–æ–¥—Ö–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ** - –Ω–µ—Ç –ø—Ä–æ–±–ª–µ–º —Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é

**–¢–µ–∫—É—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –æ–ø—Ç–∏–º–∞–ª—å–Ω–∞:**
- Redis List –¥–ª—è –æ—á–µ—Ä–µ–¥–µ–π (–Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å)
- Pub/Sub –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (real-time)
- –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥ = –ª—É—á—à–µ–µ –∏–∑ –æ–±–æ–∏—Ö –º–∏—Ä–æ–≤

**–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ:**
- –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å Pub/Sub –¥–ª—è real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π —Å—Ç–∞—Ç—É—Å–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ)
